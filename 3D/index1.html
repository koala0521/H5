<!DOCTYPE html>
<html>
	<head>
		<title>document</title>
		<meta charset="UTF-8">
		
		<script>
		    document.write('<meta name="viewport" content="width=device-width,user-scalable=no" />')
		    var fz = document.documentElement.clientWidth / 10;
		    
		    document.getElementsByTagName('html')[0].style.fontSize = fz + 'px';
		    
		    document.addEventListener('touchstart',function(ev){
		        ev.preventDefault();
		    },{passive:false});
		</script>
		<link rel="stylesheet" href="css/reset.css" />
		<link rel="stylesheet" type="text/css" href="css/index.css"/>
		<script src="js/zepto_1.1.3.js" ></script>
		<script src="js/m.Tween.js" ></script>
	</head>
	<body>
		
		<div class="warp" >
			
			<header></header>
			
			<section class="main"> 
				
				<ul class="list">
					
				</ul>
				
				<ul class="list2" >
					<li>
						
						<div>第一屏</div>
						
					</li>
					<li>第二屏</li>
					<li>第三屏</li>
					<li>第四屏</li>
				</ul>
				
			</section>
			
			<div id="mask" ></div>
			
			<div class="dialog" ></div>	
			
			<footer></footer>
		</div>
		
	</body>
	
	<script>
		
		var w = $(".warp").width(),		
			h = $(".warp").height();
		
		;(function(){

			var list = $(".list").eq(0),
				str = "",
				r = w,
				phi = 18,
				liW = Math.tan( phi/2 * (Math.PI/180) )*r*2;
			
			$(".main").css("perspective", r + "px");

			for (var i = 0; i < 20; i++) { //生成外层圆柱
				
				str += "<li style=' width:"+ liW+20 +"px; margin-left:"+ (-liW/2) +"px; background-position:"+ -i*liW +"px 0px;background-size:"+ liW*20 +"px "+ 2*h +"px; transform: rotateY("+ i*phi +"deg) translateZ("+ r +"px)' ></li>";
			
			}		
			
			list.html(str);
			
			//内层四面体
			
			var list2 = $("ul.list2").eq(0),
				lis = $(".list2 li"),
				wid = lis.eq(0).width();

			lis.forEach(function( item , index ){
				
				return $(item).css("transform","rotateY("+ index*90 +"deg) translateZ("+ r +"px) scale(1.5)");
				
			})
			
		})()
		

		
	</script>
	
	<script src="js/my.js" ></script>
	
</html>